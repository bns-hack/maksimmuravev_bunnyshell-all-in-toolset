kind: Environment
name: localtunnel
type: primary
components:
    -
        kind: Service
        name: localtunnel
        dockerCompose:
            image: "defunctzombie/localtunnel-server:latest"
            command: "--port 3000 --domain $EXTERNAL_DOMAIN --secure"
            environment:
                EXTERNAL_DOMAIN: "{{ components.localtunnel.ingress.hosts[0] }}"
            ports:
              - '3000:3000'
        hosts:
            -
                hostname: 'localtunnel-{{ env.base_domain }}'
                path: /
                servicePort: 3000
