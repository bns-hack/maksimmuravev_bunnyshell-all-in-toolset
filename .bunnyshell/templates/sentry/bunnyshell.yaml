kind: Environment
name: sentry
type: primary
components:
    -
        kind: Service
        name: docker
        volumes:
          -
            name: sentry-volume
            mount: /opt/sentry
        dockerCompose:
            image: "docker:20.10.17-dind-alpine3.16"
            command: >
              sh -c "cat <<EOF > /opt/sentry/script.sh
              #!/bin/bash
              echo 'Hello, World!'
              EOF
              chmod +x /opt/sentry/script.sh && /opt/sentry/script.sh"
            volumes:
              - sentry-volume
            ports:
              - '9000:9000'
        hosts:
            -
                hostname: 'sentry-{{ env.base_domain }}'
                path: /
                servicePort: 9000

volumes:
  -
    name: sentry-volume
    type: disk
    size: 10Gi
